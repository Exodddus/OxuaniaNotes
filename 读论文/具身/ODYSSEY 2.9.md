***ODYSSEY: Open-World Quadrupeds Exploration and Manipulation for Long-Horizon Tasks***
## Method
1. 长周期任务规划器
	-  地图感知任务规划 - 系统融合LiDAR点云和RGB图像，利用预训练的基础模型生成一个包含物体几何信息和语义标签的“实例图”。然后依靠GPT-4将指令分解为一系列原子动作（如导航、拾取、放置、推拉），针对位移任务（如导航、推拉）还需生成粗略的目标航路点。
        
    - 几何约束局部操作规划 - 生成夹爪操作轨迹，首先需要模型根据动作描述（如 “抓取玩具枪”）推断图像空间中的任务相关接触点 $p^∗$；将该接触点投影到深度图像，恢复其在机器人坐标系下的 3D 位置 $P_(ee)​$，作为夹爪运动的目标位置基准；为避免夹爪与物体 / 环境碰撞，设定双重约束生成夹爪姿态 $R_(ee)$​：若目标物体存在主轴线 a，则夹爪 x 轴（闭合方向）、z 轴（趋近方向）需与 a 正交（$r_x⊤​a=0,r_z⊤​a=0$）；若物体附着于带法向量 n 的平面（如桌面），则夹爪 z 轴需与 n 对齐且不违反主轴线约束（$r_z​∥n, s.t.r_z⊤​a=0$）。
    
2. 全身控制策略
	- **Mobile Manipulation Policy** - 采取两阶段的课程学习策略，第一阶段专注移动能力，机械臂关节固定，神经网络只练习控制行走；第二阶段释放机械臂关节控制权，练习全身协同。最终得到的神经网络同时控制12个退步关节+6个机械臂关节。
	- Terrain-Invariant End-Effector Sampling - 为解耦底盘波动对目标位置的影响，采用地形无关的采样策略，首先在世界坐标系中定义一个以机械臂基座为中心的球形空间，并在其中采样目标点。这样得到的目标在世界坐标系中的垂直高度是预先固定的，然后可以将其转换回机器人的移动底座坐标系中。
	- Domain Randomization - 为实现 Sim2Real 迁移，在仿真训练中引入极大的随机扰动，让机器人学会忽略环境噪声和物理差异。
		- 物理属性随机化：随机化机器人连杆、机械臂末端以及交互物体的质量，同时，大幅度改变足端、机械臂和地面的摩擦系数； 随机化关节的阻尼（Damping）、刚度（Stiffness）以及关节限位，使策略能够适应不同损耗程度的硬件。
		- 外部干扰与观测噪声：在训练过程中，会周期性地给机器人底座施加随机方向和大小的外部推力，迫使策略学会如何维持动态平衡；对本体感受（如关节角度、角速度）和指令输入添加高斯噪声，模拟现实传感器的读数波动。
		- 环境与视觉随机化：随机改变环境的光源位置、颜色、亮度，以及墙壁和物体的材质贴图，防止模型对特定的仿真颜色产生过拟合；在场景中随机添加无关的杂物和障碍物，训练模型在杂乱环境中识别目标的能力。
		- 地形复杂度随机化：在训练场中混合了平地、斜坡（Slopes）、楼梯（Stairs）、坑洼（Pits）以及离散的砖块路面（Bricks）；随着训练的进行，地形的坡度和台阶高度会逐渐增加，这种“课程学习”式的随机化确保了策略在极端地形下的稳定性。

- GPT / QWen 仅通过提示工程做场景、格式适配，不参与任何训练；整个项目的训练工作仅针对底层的全身控制神经网络做强化学习，这是系统唯一需要训练和迭代的核心模块。

| 对比维度          | GPT-4.1（大语言模型 LLM）                                                                           | Qwen2.5-VL-72B-Instruct（视觉语言模型 VLM）                                                 | 强化学习训练的全身控制神经网络（运动控制专用）                                                                                            |
| ------------- | -------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| **核心定位**      | 高层长程任务规划                                                                                     | 中层局部操作引导                                                                            | 底层物理动作执行                                                                                                           |
| **核心目标**      | 把自然语言指令拆解为标准化原子动作序列，明确 “做什么、按什么顺序做”                                                          | 把第一人称视觉信息转化为夹爪精准动作指令，明确 夹爪怎么动                                                       | 把速度 / 操作指令转化为机器人关节动作，实现 “移动 + 操作” 的物理执行与地形适配                                                                       |
| **是否参与训练**    | 否（原生预训练模型，无参数微调）                                                                             | 否（原生预训练模型，无参数微调）                                                                    | 是（系统唯一需要训练的核心模块，全流程强化学习训练）                                                                                         |
| **适配 / 训练方法** | 定制化**提示工程**（Prompt Engineering）                                                              | 定制化**提示工程**+ 论文设计的**几何约束规则**                                                        | 基于 IsaacLab 框架的**两阶段课程强化学习**+ 地形不变采样 + 域随机化 + 定制奖励函数                                                               |
| **输入信息**      | 1. 无模板自然语言总任务<br><br>2. 实例级语义图（场景物体的语义标签 + 3D 几何信息）                                          | 1. 腕部 RGB-D 相机的**第一人称视觉图像**<br><br>2. 高层下达的单个原子操作指令（如 pick/place）                   | 1. 高层规划的速度控制指令（x^,y^​,ω^）<br><br>2. 6DoF 末端执行器目标<br><br>3. 局部地面高度图 + 投影重力向量<br><br>4. 机器人本体感受状态（关节位置 / 速度）+ 上一时刻动作 |
| **输出信息**      | 1. 标准化原子动作序列（nav/pick/place 等）<br><br>2. 空间位移类动作的**粗粒度目标路点**（2D 占据图坐标）<br><br>3. 每个动作的任务进度描述 | 1. 图像空间的**像素级接触点**p∗<br><br>2. 机器人坐标系下的 3D 夹爪位置Pee​<br><br>3. 符合几何约束的 6DoF 夹爪姿态Ree​ | 18 维关节位置偏移量at​（四足 12 关节 + 机械臂 6 关节），叠加默认配置后生成目标关节位置                                                                |
| **工作频率 / 特性** | 低频率（长程任务拆解，一次规划对应一系列动作）、**语义推理为主**                                                           | 中频率（单个操作动作引导，一次输入对应一次操作）、**视觉定位 + 几何推理为主**                                          | 高频（200Hz 实时输出）、**物理计算 + 实时控制为主**，毫秒级响应地形与指令变化                                                                      |
| **对应论文模块**    | 3.1 节 长程任务规划器 - 地图感知任务级规划                                                                    | 3.1 节 长程任务规划器 - 几何约束局部操作规划                                                          | 3.2 节 全身控制策略                                                                                                       |
| **核心能力依赖**    | 预训练的**自然语言理解、空间语义推理、任务分解能力**                                                                 | 预训练的**像素级视觉定位、视觉 - 语言关联、几何推理能力**                                                    | 强化学习训练后的**运动控制、地形自适应、移动 - 操作协同能力**                                                                                 |
